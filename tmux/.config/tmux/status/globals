#!/usr/bin/env bash

# â”â”â”â”â”â”â”â”â”â”â”“
# â”ƒ globals â”ƒ
# â”—â”â”â”â”â”â”â”â”â”â”›

readonly TMUX_CONFIG_DIRECTORY_PATH="$(tmux display-message -p "#{config_files}" | xargs dirname)"

readonly -A COMPONENTS=(
  ["SESSION"]="#(${TMUX_CONFIG_DIRECTORY_PATH}/status/components/session)"
  ["CURRENT_WINDOW"]="#(${TMUX_CONFIG_DIRECTORY_PATH}/status/components/current_window #{window_index} #{pane_index})"
  ["WINDOW"]="#(${TMUX_CONFIG_DIRECTORY_PATH}/status/components/window #{window_index} #{pane_index})"
  ["GIT"]="#(${TMUX_CONFIG_DIRECTORY_PATH}/status/components/git)"
  ["PATH"]="#(${TMUX_CONFIG_DIRECTORY_PATH}/status/components/path)"
  ["UPTIME"]="#(${TMUX_CONFIG_DIRECTORY_PATH}/status/components/uptime)"
  ["USER"]="#(${TMUX_CONFIG_DIRECTORY_PATH}/status/components/user)"
)

readonly -A NUMBER_FORMATS=(
  ["PLAIN"]="0123456789"
  ["DIGITAL"]="ğŸ¯°ğŸ¯±ğŸ¯²ğŸ¯³ğŸ¯´ğŸ¯µğŸ¯¶ğŸ¯·ğŸ¯¸ğŸ¯¹"
  ["HOLLOW_SQUARE"]="ó°£ó°¦ó°©ó°¬ó°®ó°°ó°µó°¸ó°»ó°¾"
  ["HOLLOW_DOUBLE_SQUARE"]="ó°¢ó°¥ó°¨ó°«ó°²ó°¯ó°´ó°·ó°ºó°½"
)

readonly -A ICONS=(
  ["PREFIX_INACTIVE"]="ó°¤‚"
  ["PREFIX_ACTIVE"]="ó°ª¥"
  ["WINDOW"]="ï‹"
  ["DOT"]="ï“ƒ"
  ["RESTORE"]="ó°¯"
  ["BRANCH"]="ó°˜¬"
  ["BRANCH_DIRTY"]="ó±“"
  ["ARROW_UP"]="ï…¶"
  ["ARROW_DOWN"]="ï…µ"
  ["ASTERISK"]="ï©"
  ["PLUS"]="ï§"
  ["MINUS"]="ï¨"
  ["QUESTION_MARK"]="?"
  ["FOLDER"]="ï»"
  ["TIMER"]="ó°”Ÿ"
  ["USER"]="ï€‡"
  ["SHADE"]="â–‘"
)

declare -A COLORS=(
  ["WHITE"]="#DEEEED"
  ["RED"]="#D70000"
  ["MAGENTA"]="#D7007D"
  ["PURPLE"]='#875FA6'
  ["GREEN"]="#789978"
  ["YELLOW"]="#ABAB77"
  ["ORANGE"]="#FFAA88"
  ["BLUE"]="#7788AA"
  ["CYAN"]="#708090"
  ["BLACK"]="#000000"
  ["GRAY_1"]="#080808"
  ["GRAY_2"]="#191919"
  ["GRAY_3"]="#2A2A2A"
  ["GRAY_4"]="#444444"
  ["GRAY_5"]="#555555"
  ["GRAY_6"]="#7A7A7A"
  ["GRAY_7"]="#AAAAAA"
  ["GRAY_8"]="#CCCCCC"
  ["GRAY_9"]="#DDDDDD"
)

COLORS["BACKGROUND"]="#0A0A0A"
COLORS["FOREGROUND"]="${COLORS["WHITE"]}"

readonly -A COLORS

convert_number_format() {
  local -r NUMBER="$1"
  local -r FORMAT="$2"

  if [[ -z "${FORMAT}" ]]; then
    echo "${NUMBER}"
    return
  fi

  if [[ ! "${#FORMAT}" -eq 10 ]]; then
    echo "${NUMBER}"
    return
  fi

  for ((index = 0; index < "${#NUMBER}"; index++)); do
    echo -n "${FORMAT:"${NUMBER:${index}:1}":1}"
  done
}
readonly -f convert_number_format
